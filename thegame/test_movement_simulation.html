<!DOCTYPE html>
<html>
<head>
    <title>Movement System Test</title>
    <style>
        body { background: #1a1a1a; color: white; font-family: Arial; padding: 20px; }
        .test-section { margin: 30px 0; padding: 20px; border: 1px solid #444; border-radius: 8px; }
        .minimap-container { text-align: center; margin: 20px 0; }
        .status { margin: 10px 0; padding: 10px; border-radius: 4px; }
        .success { background: #004400; border: 1px solid #008800; }
        .error { background: #440000; border: 1px solid #880000; }
        .info { background: #004488; border: 1px solid #0088cc; }
    </style>
</head>
<body>
    <h1>🎮 Movement System Test</h1>
    
    <div class="test-section">
        <h2>Fixed Movement Issues</h2>
        <div class="status success">
            ✅ Only tiles with actual database connections are now clickable
        </div>
        <div class="status success">
            ✅ Movement endpoint exists at POST /move/{direction}
        </div>
        <div class="status success">
            ✅ JavaScript move() function properly calls the server
        </div>
        <div class="status info">
            ℹ️ Authentication required for actual movement testing
        </div>
    </div>
    
    <div class="test-section">
        <div class="minimap-container">
            <h3>Diamond City Center (Room 1)</h3>
            <p><em>Available connections: North (City Hall), East (Fight Arena), Southwest (Casino)</em></p>
            
            <div style="
                display: grid; 
                grid-template-columns: repeat(10, 1fr); 
                grid-template-rows: repeat(10, 1fr);
                width: 300px; 
                height: 300px; 
                gap: 1px; 
                background: #2a2a2a; 
                padding: 10px; 
                border-radius: 8px; 
                border: 2px solid #666;
                margin: 0 auto;
            ">
                <!-- Row 0 -->
                <div style="background: #4a4a4a; color: #888; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 1px solid #555;" title="Building">🏢</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #2d5a2d; color: #5d8a5d; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 1px solid #555;" title="Park">🌳</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: linear-gradient(45deg, #2d2d5a, #1e90ff); color: #fff; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 14px; border: 2px solid #0066cc; cursor: pointer; box-shadow: 0 0 10px rgba(65, 105, 225, 0.8);" onclick="move('north')" title="Go north to City Hall">🏛️</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #5a4a2d; color: #8a7a5d; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 1px solid #555;" title="Shop">🏪</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #4a4a4a; color: #888; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 1px solid #555;" title="Building">🏢</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                
                <!-- Row 1 -->
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                
                <!-- Continue pattern for remaining rows... -->
                <!-- Row 4 (center row with current location) -->
                <div style="background: #4a4a4a; color: #888; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 1px solid #555;" title="Building">🏢</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #2d5a2d; color: #5d8a5d; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 1px solid #555;" title="Park">🌳</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: linear-gradient(45deg, #ffd700, #ffeb3b); color: #000; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 16px; border: 2px solid #ff8c00; box-shadow: 0 0 8px rgba(255, 215, 0, 0.8);" title="Current Location">👤</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: #5a4a2d; color: #8a7a5d; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 12px; border: 1px solid #555;" title="Shop">🏪</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                <div style="background: linear-gradient(45deg, #4169e1, #1e90ff); color: #fff; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 14px; border: 2px solid #0066cc; cursor: pointer; box-shadow: 0 0 10px rgba(65, 105, 225, 0.8);" onclick="move('east')" title="Go east to Fight Arena">🏟️</div>
                <div style="background: #666; color: #999; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 10px; border: 1px solid #777;" title="Street">⬜</div>
                
                <!-- More rows... -->
                <!-- Row 8 (southwest casino) -->
                <div style="background: linear-gradient(45deg, #4169e1, #1e90ff); color: #fff; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 14px; border: 2px solid #0066cc; cursor: pointer; box-shadow: 0 0 10px rgba(65, 105, 225, 0.8);" onclick="move('southwest')" title="Go southwest to Casino">🎰</div>
                <!-- Fill remaining cells... -->
            </div>
            
            <div style="text-align: center; font-size: 11px; color: #aaa; margin-top: 8px;">
                🌟 Diamond City Streets - Click blue buildings to navigate
            </div>
        </div>
    </div>
    
    <div class="test-section">
        <h3>Movement Test Log</h3>
        <div id="log" style="background: #000; padding: 10px; border-radius: 4px; font-family: 'Courier New', monospace; min-height: 100px;">
            <div style="color: #00ff00;">[READY] Click on a blue building to test movement</div>
        </div>
    </div>
    
    <script>
        function move(direction) {
            const log = document.getElementById('log');
            log.innerHTML += '<div style="color: #ffff00;">[CLICK] Attempting to move ' + direction + '</div>';
            
            // Simulate the actual game's movement function
            fetch('/move/' + direction, {method: 'POST'})
            .then(response => {
                if (response.ok) {
                    log.innerHTML += '<div style="color: #00ff00;">[SUCCESS] Movement to ' + direction + ' completed</div>';
                    log.innerHTML += '<div style="color: #0088ff;">[INFO] Page would normally reload</div>';
                } else {
                    log.innerHTML += '<div style="color: #ff0000;">[ERROR] Movement failed - Status: ' + response.status + '</div>';
                    if (response.status === 302) {
                        log.innerHTML += '<div style="color: #ff8800;">[AUTH] Redirected to login - authentication required</div>';
                    }
                }
            })
            .catch(error => {
                log.innerHTML += '<div style="color: #ff0000;">[ERROR] Network error: ' + error.message + '</div>';
            });
            
            // Scroll log to bottom
            log.scrollTop = log.scrollHeight;
        }
    </script>
</body>
</html>